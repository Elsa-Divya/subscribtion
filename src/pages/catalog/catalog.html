<!--
  Generated template for the CatalogPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      <ion-icon name="list">&nbsp;Catalog</ion-icon>
    </ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <div class="header-bar">
    <ion-title ion-text>
      <ion-icon name="search"></ion-icon>&nbsp; Select Shop</ion-title>
  </div>
  <ion-row>
    <!-- <ion-col col-lg-6 col-md-6 col-sm-12 *ngFor="let shop of shopList">
      <ion-list radio-group [(ngModel)]="shopSelected">
        <ion-item>
          <ion-radio item-start value="{{shop.shopId}}"></ion-radio>
          <ion-label>
            <p>{{shop.shopName}}, {{shop.shopLocality}} , {{shop.shopCity}} </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-col> -->
    <ion-col col-lg-12 col-md-12 col-sm-12 col-xs-12>
      <ion-list radio-group [(ngModel)]="shopSelected">

        <ion-row>
          <ion-col col-lg-6 col-md-6 col-sm-12 *ngFor="let shop of shopList">
            <ion-item>
              <ion-radio item-start value="{{shop.shopId}}"></ion-radio>
              <ion-label>
                <p ion-text text-left>{{shop.shopName}}, {{shop.shopLocality}} , {{shop.shopCity}} </p>
              </ion-label>
            </ion-item>
          </ion-col>
          <ion-col col-12>
            <button margin-left ion-button (click)="viewProduct(shopSelected)" [disabled]="!shopSelected" margin-top>View Products</button>
          </ion-col>
        </ion-row>


      </ion-list>
    </ion-col>
  </ion-row>



  <ion-grid>
    <div class="header-bar">
      <ion-title ion-text>
        <ion-icon name="list-box"></ion-icon>&nbsp; Product Details
      </ion-title>
    </div>
    <ion-row id="viewProduct">
      <ion-col>
        <button ion-button small round color="secondary" [disabled]="!shopSelected" (click)="uploadCatalog()">Upload Catalog</button>
        <button ion-button small round color="primary" (click)="showDialogToAdd()">Add</button>
        <!-- <button ion-button small round outline color="secondary" [disabled]="!shopSelected" (click)="save()">Save Changes</button> -->
        <button ion-button small round color="secondary" [disabled]="!shopSelected" (click)="deleteAll()">Delete All</button>
        <button ion-button small round outline color="secondary" [disabled]="!shopSelected" (click)="refresh()">Refresh</button>
        
      </ion-col>
      <!-- <ion-col>
       
          <ng2-smart-table [settings]="settings" [source]="source"  (editConfirm)="onSaveConfirm($event)"
            (createConfirm)="onCreateConfirm($event)" (userRowSelect)="userRowSelect($event)"></ng2-smart-table>
       
      </ion-col> -->
    </ion-row>

  </ion-grid>

  <p-table #dt [columns]="cols" [value]="productList" selectionMode="single" [(selection)]="selectedProduct" (onRowSelect)="onRowSelect($event)"
    [paginator]="true" [rows]="15">
    <ng-template pTemplate="caption">
      <div style="text-align: right">
        <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
        <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dt.filterGlobal($event.target.value, 'contains')"
          style="width:auto">
      </div>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th *ngFor="let col of columns">
          {{col.header}}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr [pSelectableRow]="rowData">
        <td>{{rowData.barcodeId}}</td>
        <td>{{rowData.sku}}</td>
        <td>{{rowData.name}}</td>
        <td><a target="_blank" href="{{rowData.image}}">View Image</a></td>
        <td>{{rowData.category}}</td>
        <td>{{rowData.subCategory}}</td>
        <td><a target="_blank" href="{{rowData.categoryImage}}">View Image</a> </td>
        <td>{{rowData.amount}}</td>
        <td>{{rowData.isPerishable}}</td>

      </tr>
    </ng-template>

  </p-table>




</ion-content>
<p-dialog header="Product Details" [(visible)]="displayDialog" [width]="600">
  <div class="ui-g ui-fluid" *ngIf="product">
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="vin">BarcodeId</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="vin" [(ngModel)]="product.barcodeId" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="year">Sku</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="year" [(ngModel)]="product.sku" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="brand">Product Name</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="brand" [(ngModel)]="product.name" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="color">Image Url</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="color" [(ngModel)]="product.image" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="color">Category</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="color" [(ngModel)]="product.category" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="color">Sub Category</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="color" [(ngModel)]="product.subCategory" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="color">Category Image</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="color" [(ngModel)]="product.categoryImage" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="color">Amount</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="color" [(ngModel)]="product.amount" />
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">
        <label for="color">isPerishable</label>
      </div>
      <div class="ui-g-8">
        <input pInputText id="color" [(ngModel)]="product.isPerishable" />
      </div>
    </div>
    <div class="ui-g-12" style="display: none">
        <div class="ui-g-4">
          <label for="color">isPerishable</label>
        </div>
        <div class="ui-g-8">
          <input pInputText id="color" [(ngModel)]="product.delete" />
        </div>
      </div>
  </div>
  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix">
      <button ion-button (click)="delete()">Delete</button>
      <button ion-button (click)="save()">Save</button>
    </div>
  </p-footer>
</p-dialog>